(this["webpackJsonpbeat-the-nerd"]=this["webpackJsonpbeat-the-nerd"]||[]).push([[0],{20:function(e,t,n){e.exports=n(35)},25:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(9),s=n.n(i),c=(n(25),n(4)),o=n(7),u=n(18),l=n(15),f=[],m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MESSAGE":return[].concat(Object(l.a)(e),[{text:t.text,id:e.length,uid:t.uid}]);case"GET_MESSAGES":return Object(l.a)(e);default:return e}},h=n(19),p={appState:"greeting"},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP_STATE_CHANGE":return Object(h.a)({},e,{appState:t.payload});case"APPLICATION_START":return p;default:return e}},v=Object(o.c)({messages:m,application:d}),g=n(1),b=n(2),E=n(5),y=n(3),O=n(6),j=n(8),w=n.n(j),k=n(13),I={user:1,cpu:2},A={server:"https://newton-api.herokuapp.com",operation:"simplify"},S=new(function(){function e(){Object(g.a)(this,e),this.config=A}return Object(b.a)(e,[{key:"build",value:function(e){return"".concat(this.config.server,"/api/").concat(this.config.operation,"/").concat(encodeURIComponent(e))}}]),e}()),x={server:"http://numbersapi.com",operation:"math"},N=["math","trivia"],T=new(function(){function e(){Object(g.a)(this,e),this.config=x}return Object(b.a)(e,[{key:"build",value:function(e,t){return"".concat(this.config.server,"/").concat(encodeURIComponent(e),"/").concat(t?N[Math.round(Math.random())]:this.config.operation)}}]),e}()),C=function(e){return{type:"APP_STATE_CHANGE",payload:e}},M=function e(t){Object(g.a)(this,e),this.message=void 0,this.message=t};function D(e){return void 0!==e.message}function R(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=5e3,r=!1;return new Promise((function(e,n){var i=setTimeout((function(){r=!0,n(new Error("Request timed out"))}),a);fetch.apply(void 0,t).then((function(t){clearTimeout(i),r||(200===t.status?e(t):n(new Error("".concat(t.status," ").concat(t.statusText))))})).catch((function(e){r||n(e)}))}))}var P=function(e,t){return{type:"ADD_MESSAGE",text:e,uid:t}},U=function(e){var t=Number(e);return!isNaN(t)&&(t>=0&&t===Math.trunc(t))},_=function(e){return function(){var t=Object(k.a)(w.a.mark((function t(n){var a;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(C("searching fun fact")),t.next=3,r=e,R(T.build(r,!0)).then((function(e){return e.text()})).catch((function(e){return new M(e)}));case 3:a=t.sent,n(B(D(a)?"Mmh, never mind.":"Hey! ".concat(a," Mind it!")));case 5:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}()},B=function(e){return function(t,n){t(P(e,I.cpu)),t(C("waiting for user question"))}},G={message:""},q=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(E.a)(this,Object(y.a)(t).call(this,e))).focusedInput=void 0,n.focusInputBox=function(){n.focusedInput&&n.focusedInput.current&&n.focusedInput.current.focus()},n.state=G,n.focusedInput=r.a.createRef(),n}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.props.waitForUserQuestion()}},{key:"handleChange",value:function(e){this.setState({message:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.addMessage(this.state.message),this.setState(G),this.focusInputBox()}},{key:"render",value:function(){var e=this,t=this.state.message;return r.a.createElement("div",{style:{position:"fixed",bottom:0,width:"100%",backgroundColor:"white"}},r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)},style:{display:"flex"}},r.a.createElement("div",{className:"nes-field",style:{flex:1}},r.a.createElement("input",{type:"text",value:t,onChange:function(t){return e.handleChange(t)},name:"message",className:"nes-input",placeholder:"Type your question here",ref:this.focusedInput})),r.a.createElement("div",{className:"nes-field"},r.a.createElement("input",{type:"submit",value:"Send",className:"nes-btn is-primary"}))))}}]),t}(r.a.Component),H=Object(c.b)(null,(function(e){return{addMessage:function(t){return e(function(e){return function(){var t=Object(k.a)(w.a.mark((function t(n){var a;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(P(e,I.user)),n(C("answering the user")),t.next=4,r=e,R(S.build(r)).then((function(e){return e.json()})).then((function(e){return e.result})).catch((function(e){return new M(e)}));case 4:D(a=t.sent)?n(B("Oh no, I don't know")):U(a)?(n(P(a,I.cpu)),n(_(a))):n(B(a));case 6:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},waitForUserQuestion:function(){return e(C("waiting for user question"))}}}))(q),F={dots:""},J=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(E.a)(this,Object(y.a)(t).call(this,e))).maxDots=3,n.state=F,n.maxDots=3,n}return Object(O.a)(t,e),Object(b.a)(t,[{key:"timer",value:function(){var e=this.state.dots.length===this.maxDots?"":this.state.dots+".";this.setState({dots:e})}},{key:"componentDidMount",value:function(){var e=setInterval(this.timer.bind(this),750);this.setState({intervalID:e})}},{key:"componentWillUnmount",value:function(){this.state.intervalID&&clearInterval(this.state.intervalID)}},{key:"render",value:function(){var e=this.state.dots;return r.a.createElement("div",null,e)}}]),t}(r.a.Component),L=n(14),Q=n.n(L),V=function(e){var t=e.data,n=e.children,a=t&&t.uid===I.user,i=!a;return r.a.createElement("section",{className:Q()("message",i?"-left":"-right")},i&&r.a.createElement("i",{className:"nes-mario"}),r.a.createElement("div",{className:Q()("nes-balloon",{"from-left":i},{"from-right":a})},n,t&&r.a.createElement("p",null,t.text)),a&&r.a.createElement("i",{className:"nes-bcrikko"}))},W=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(E.a)(this,Object(y.a)(t).call(this,e))).messagesEndlineRef=void 0,n.scrollToBottom=function(){n.messagesEndlineRef&&n.messagesEndlineRef.current&&n.messagesEndlineRef.current.scrollIntoView({behavior:"smooth"})},n.messagesEndlineRef=r.a.createRef(),n}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.props.greetTheUser()}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"render",value:function(){var e=this.props.messages;return r.a.createElement("section",{className:"nes-container with-title",style:this.props.style},r.a.createElement("p",{className:"title"},"Messages"),r.a.createElement("section",{className:"message-list"},e.map((function(e,t){return r.a.createElement(V,{data:e,key:e.id})})),this.props.isCPUAnswering&&r.a.createElement(V,null,r.a.createElement(J,null))),r.a.createElement("div",{ref:this.messagesEndlineRef}))}}]),t}(r.a.Component),z=Object(c.b)((function(e){return{messages:e.messages,isCPUAnswering:"answering the user"===e.application.appState||"searching fun fact"===e.application.appState}}),(function(e){return{greetTheUser:function(){return e(B("Hello! I'm the nerd. Challenge me asking to solve any mathematical operation you want! I'll surprise you..."))}}}))(W),K={yMargins:{marginTop:"2rem",marginBottom:"4rem"}};function X(){return r.a.createElement("div",null,r.a.createElement(z,{style:K.yMargins}),r.a.createElement(H,null))}function Y(){return r.a.createElement("header",null,r.a.createElement("div",{style:{margin:"1rem 0",textAlign:"center",borderBottom:"2px solid black"}},r.a.createElement("h1",null,"Beat the Nerd")))}var Z=function(e){function t(){return Object(g.a)(this,t),Object(E.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(Y,null),r.a.createElement(X,null))}}]),t}(r.a.Component),$=Object(c.b)((function(e){return{startApplication:function(){return e({type:"APPLICATION_START"})}}}))(Z);n(33),n(34);n.d(t,"store",(function(){return ee}));var ee=Object(o.d)(v,Object(o.a)(u.a));s.a.render(r.a.createElement(c.a,{store:ee},r.a.createElement($,null)),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.5fe937f1.chunk.js.map